# Общее описание `transaction_fraud_data.parquet`

Этот анонимизированный набор данных реальных финансовые транзакции, который предназначен для разработки и тестирования моделей выявления мошеннических операций.

Он охватывает различные сценарии — от розничной торговли и ресторанов до путешествий и здравоохранения — и включает как легитимные, так и мошеннические операции. В нём представлены важные признаки, влияющие на распознавание мошенничества: сумма, тип устройства, география, валюта, тип карты и метка `is_fraud`.

## Ключевые особенности

- **Разнообразие категорий**: Розница (онлайн и офлайн), рестораны (фастфуд и премиум), развлечения, здравоохранение, образование, топливо, путешествия и др.
- **География и валюта**: Транзакции охватывают разные страны, города и валюты, что позволяет моделировать глобальные риски.
- **Профили клиентов**: Для каждой транзакции предусмотрены данные о клиенте — возраст аккаунта, используемые устройства, типичные траты, уровень защиты от мошенничества.
- **Данные, готовые для ML**: Признаки включают скорость транзакций, риск вендора, присутствие карты, отпечатки устройств и другие факторы, помогающие обнаруживать подозрительные паттерны.

## Возможные применения

- Построение моделей выявления мошенничества.
- Анализ транзакционного поведения клиентов.
- Разработка и тестирование алгоритмов обнаружения аномалий.
- Изучение методов feature engineering, оценки моделей и оптимизации производительности в сфере финтеха и e-commerce.


# Содержание файла `transaction_fraud_data.parquet`

| Поле | Описание | Тип |
|------|----------|-----|
| `transaction_id` | Уникальный идентификатор транзакции | String | 
| `customer_id` | Уникальный идентификатор клиента | String | 
| `card_number` | Маскированный номер карты | Int64 |
| `timestamp` | Дата и время транзакции | Datetime(time_unit='us') |
| `vendor_category` | Общая категория вендора (например, Розница, Путешествия) | String |
| `vendor_type` | Тип вендора внутри категории (например, "онлайн") | String |
| `vendor` | Название вендора | String |
| `amount` | Сумма транзакции | Float64 |
| `currency` | Валюта (например, USD, EUR, JPY) | String |
| `country` | Страна, где проведена транзакция | String |
| `city` | Город, где проведена транзакция | String |
| `city_size` | Размер города (например, средний, крупный) | String |
| `card_type` | Тип карты (например, Basic Credit, Gold Credit) | String |
| `is_card_present` | Присутствовала ли карта физически при оплате (POS) | Boolean |
| `device` | Устройство, с которого проведена транзакция (например, Chrome, iOS App) | String |
| `channel` | Канал проведения транзакции (веб, мобильный, POS) | String |
| `device_fingerprint` | Уникальный отпечаток устройства | String |
| `ip_address` | IP-адрес транзакции | String | 
| `is_outside_home_country` | Признак того, что операция проведена вне страны клиента | Boolean |
| `is_high_risk_vendor` | Является ли категория вендора рискованной (например, Путешествия, Развлечения) | Boolean |
| `is_weekend` | Произошла ли операция в выходной день | Boolean |
| `last_hour_activity` | Показатели активности за последний час в виде вложенной структуры | Struct({'num_transactions': Int64, 'total_amount': Float64, 'unique_merchants': Int64, 'unique_countries': Int64, 'max_single_amount': Float64}) |
| `is_fraud` | Является ли транзакция мошеннической (`True` / `False`) | Boolean |

Составное поле `last_hour_activity`:

| Ключ | Описание | Тип |
|------|----------|-----|
| `num_transactions` | Количество транзакций | Int64 |
| `total_amount` | Общая сумма транзакций | Float64 |
| `unique_merchants` | Число уникальных продавцов | Int64 |
| `unique_countries` | Число уникальных стран | Int64 |
| `max_single_amount` | Максимальная сумма одной транзакции | Float64 |


# Содержание файла `historical_currency_exchange.parquet`

Вспомогательные данные для перевода операций в нужную валюту.

Обменный курс с `2024-09-30` по `2024-10-30` относительно `USD`.

| Поле | Описание | Тип |
|------|----------|-----|
| `date` | Дата обменного курса | Date | 
| `AUD` | Австралийский доллар | Float64 | 
| `BRL` | Бразильский реал | Float64 |
| `CAD` | Канадский доллар | Float64 |
| `EUR` | Евро | Float64 |
| `GBP` | Британский фунт стерлингов | Float64 |
| `JPY` | Японская иена | Float64 |
| `MXN` | Мексиканское песо | Float64 |
| `NGN` | Нигерийская найра | Float64 |
| `RUB` | Российский Рубль | Float64 |
| `SGD` | Сингапурский доллар | Float64 |
| `USD` | Доллар США | Int64 |


Запуск проекта:
1) Форкнуть репозиторий и склонировать локально (git clone): https://github.com/ksushaloskutova/EDA_transaction.git
2) Установка зависимостей: pip install -r requirements.txt
3) Загрузка датасетов: python -m scr.download_data 
4) Открыть Jupyter: jupyter notebook
5) Запуск всех ячеек

# Итоговые выводы по EDA

## Общий вывод по EDA  

## 1. Паттерны фрода

Фродовые транзакции в среднем значительно крупнее по сумме, чем легитимные.

Медиана фрода — ~5.7k USD, медиана легитимных — ~0.9k USD.

Распределения сильно различаются: фрод чаще встречается в зоне крупных сумм, но присутствует и в низких значениях.

Есть аномальные пики по суммам, которые могут быть связаны с определёнными типами операций (кластеры на лог-графиках).

## 2. Влияние признаков  

is_high_risk_vendor и is_outside_home_country имеют сильную связь с фродом (корреляция ~0.5).

Высокий риск у транзакций в обеих категориях.

Даже для high-risk в своей стране и для low-risk за границей уровень фрода заметно выше среднего.

is_card_present положительно связано с фродом, но умеренно (~0.3).

is_weekend — небольшая, но стабильная положительная корреляция (~0.25).

Время суток (hour) слабо отрицательно связано с фродом — фрод чуть чаще ночью.

## 3. Временные закономерности  

Есть признаки, что фрод распределён неравномерно по часам и дням недели.

Связь между is_weekend и dow (~0.8) говорит о дублировании признаков, можно оставить только один.

## 4. Курсовые и денежные показатели  

После нормализации сумм транзакций через курсы валют (в USD) стало проще сравнивать разные страны.

rate_to_usd сильно коррелирует с amount_usd (~0.8), что может вызвать мультиколлинеарность в моделях.

## Гипотезы для проверки  

Большие суммы — повышенный риск. Проверить моделью зависимость вероятности фрода от суммы (в USD).

High-risk продавцы и зарубежные транзакции усиливают вероятность фрода. Возможна мультипликативная зависимость.

Ночные часы и выходные могут быть дополнительным индикатором аномальной активности.

Возможно, отдельные IP-адреса и device_fingerprint дают почти сплошной фрод — стоит дополнительно исследовать.